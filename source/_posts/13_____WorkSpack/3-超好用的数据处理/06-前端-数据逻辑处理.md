---
title: 前端-数据逻辑处理
tags: JavaScript
categories: JavaScript
cover: >-
  https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1248328118,1437036541&fm=11&gp=0.jpg
abbrlink: e379c270
date: 2019-08-13 00:00:00
---

## 常用

- 全局匹配替换字符串

```javascript
let obj = JSON.parse(
  `${JSON.stringify(DataTree)}`.replace(
    new RegExp("children", "g"),
    `disabled":true,"children`
  )
);
// 处理了 children 字符串 全局替换为了 disabled":true,"children 字符串
```

- 利用正则全局替换字符串

```javascript
let str = "zhangsan666zhangsan";
console.log(str.replace(new RegExp("zhangsan", "g"), "999"));
// result：  999666999
```

- 递归遍历判断做某些事情（浪费性能，不推荐）

```javascript
let arr = []; // 数据源

// 递归函数
let isDisabledNodes = (arr) => {
  return arr.map((item) => {
    if (item.children) {
      item.disabled = true;
      isDisabledNodes(item.children);
      return item;
    }
  });
};
console.log("处理后的数据---------", isDisabledNodes(arr));
```

## Js 常用数据处理方法

1.过滤 filter

```javascript
let arr = [1, 2, 3, 4, 5, 6, 7, 8, 9];
const newArr = arr.filter((item) => {
  return item > 3;
});
console.log(newArr); // 4,5,6,7,8,9
```

2.排序 sort

```javascript
let arr = [1, 2, 3, 4, 5, 6, 7, 8, 9];
let obj = [
  { id: 6, name: "tom" },
  { id: 2, name: "lin" },
  { id: 8, name: "sun" },
];
const newArr = arr.sort((a, b) => a - b); // 升序
const newObj = obj.sort((a, b) => b.id - a.id); // 降序
console.log("--------", newArr, "--------", newObj);
```

3.去除数组指定元素 splice（元素开始，删除个数）

```javascript
let arr = [1, 2, 3, 4, 5, 6];
for (let i = 0; i < arr.length; i++) {
  if (arr[i] > 3) {
    arr.splice(i, 1);
    i--; // 重点
  }
}
console.log("------------", arr);
```

4.数组的元素全部符合条件返回 true every

```javascript
let obj = [
  { id: 6, name: "tom" },
  { id: 2, name: "lin" },
  { id: 8, name: "sun" },
];
const newObj = obj.every((item) => {
  return item.id > 1;
});
console.log("--------", newObj); // true
```

5.数组的元素一项符合条件返回 true some

```javascript
let obj = [
  { id: 6, name: "tom" },
  { id: 2, name: "lin" },
  { id: 8, name: "sun" },
];
const newObj = obj.some((item) => {
  return item.id > 5;
});
console.log("--------", newObj); // true
```

6.合并对象（深拷贝）

```javascript
let obj1 = {
  name: "zhangsan",
};
let obj2 = {
  age: 20,
};
const newObj = Object.assign(obj1, obj2);
console.log(newObj); // { name: "zhangsan", age: 20}

// es6合并
let obj3 = { ...obj1, ...obj2 };
console, log(obj3); // { name: "zhangsan", age: 20}
```

7.Js 判断一个 object 对象是否为空？

```javascript
let data = {};
if (JSON.stringify(data) === "{}") {
  return false; // 如果为空,返回false，数组可以用同样的判断方式
}
if (Object.keys(object).length === 0) {
  return false; // 如果为空,返回false，Object.keys(object)会返回一个空数组[]
}
console.log(JSON.stringify(data) === "{}"); // true
console.log(Object.keys(data).length === 0); // true
```

8.判断对象或者数组中元素是否存在

```javascript
let data = { name: "zhangsan", age: 20 };
console.log(typeof data.name !== undefined); // true
console.log(typeof data.name === undefined); // false
```

9.将时间戳转换为时间格式

```javascript
formatDate(timestamp) {
    var date = new Date(timestamp);//时间戳为10位需*1000，时间戳为13位的话不需乘1000
    var Y = date.getFullYear() + '-';
    var M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '-';
    var D = (date.getDate() < 10 ? '0'+(date.getDate()) : date.getDate()) + ' ';
    var h = (date.getHours() < 10 ? '0'+(date.getHours()) : date.getHours()) + ':';
    var m = (date.getMinutes() < 10 ? '0'+(date.getMinutes()) : date.getMinutes()) + ':';
    var s = (date.getSeconds() < 10 ? '0'+(date.getSeconds()) : date.getSeconds());
    return Y+M+D+h+m+s;
},
```

10.利用 filter 去重

```javascript
var arr = ["666", "999", "888", "666"];
var r = arr.filter((element, index, self) => {
  return self.indexOf(element) === index;
});
console.log(r);
```

11.删除一个对象上的树形

```javascript
// 利用es6的 ...运算符将其他属性和a属性分开来，这波操作很亮眼！
let obj = { a: 1, b: 2, c: 3 };
let { a, ...newObj } = obj;
console.log(newObj); // { b:2, c:3 }
```
