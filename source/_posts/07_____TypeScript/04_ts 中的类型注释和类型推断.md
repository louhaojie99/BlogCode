---
title: 四、ts 中的类型注释和类型推断
tags: TypeScript
categories: TypeScript
cover: 'https://picabstract-preview-ftn.weiyun.com/ftn_pic_abs_v3/fdbe621f6b31fb31333381d541533fe2e8a61025b4acebb1f10c9f948a9ffce78a532557a1a789d30807b98f07b23952?pictype=scale&from=30113&version=3.3.3.3&uin=851681631&fname=10_ts.jpg&size=750'
abbrlink: 59ded8c6
date: 2020-01-04 00:00:00
---

### ts 中的类型注释和类型推断

- TypeScript 中的两个基本概念：<span style="color: #ff0000;">类型注解</span>和<span style="color: #ff0000;">类型推断</span>，这两个概念在我们编写 typescript 代码时会一直使用的重点

#### type annotation 类型注解

1. 这个概念我们在前三节课中一直使用，只是我没明确这个概念和关系，所以你会觉的很陌生。这就好比，你身边有一个特别漂亮的姑娘，她一直很喜欢你，你也很喜欢她，但窗户纸一直没捅破，直到有一天你们喝多后，去了如家酒店（谈了谈心），你们的关系就明确了。

   ```typescript
   let count: number;
   count = 123;
   ```

   这段代码就是类型注解，意思是显示的告诉代码，我们的`count`变量就是一个数字类型，这就叫做`类型注解`。是不是一下就明白了，其实程序这东西就这么简单，真正复杂的是人。

#### type inferrence 类型推断

2. 当你明白了`类型注解`的概之后，再学类型推断就更简单了。

   ```typescript
   let countInFerrence = 123; // 自动根据数值推断为 number 类型
   ```

   这时候我并没有显示的告诉你变量`countInference`是一个数字类型，但是如果你把鼠标放到变量上时，你会发现 TypeScript 自动把变量注释为了`number`（数字）类型，也就是说它是有某种推断能力的，通过你的代码 TS 会自动的去尝试分析变量的类型。这个就彷佛是人的情商比较高，还没等女生表白那，你就已经看出她的心思。

#### 工作使用场景问题（隐式规则）

- 如果`TS`能够自动分析变量类型，我们就什么也不需要做了

- 如果`TS`无法分析变量类型的话，我们就需要使用类型注解

  先看一下不用写类型注解的栗子:

  ```typescript
  const one = 1;
  const two = 2;
  const three = one + two;
  ```

  再看一个用写类型注解的栗子：

  ```typescript
  function getTotal(one, two) {
  	return one + two;
  }
  ```

  这种形式，就需要用到类型注释了，因为这里的`one`和`two`会显示为`any`类型。这时候如果你传字符串，你的业务逻辑就是错误的，所以你必须加一个`类型注解`，把上面的代码写成下面的样子。

  ```typescript
  function getTotal(one: number, two: number) {
  	return one + two;
  }
  const total = getTotal(1, 2);
  ```

  这里有的一个问题是，为什么`total`这个变量不需要加类型注解，因为当`one`和`two`两个变量加上注解后，TypeScript 就可以自动通过类型推断，分析出变量的类型。

**总结：**在写 TypeScript 代码的一个重要宗旨就是每个变量，每个对象的属性类型都应该是固定的，如果你推断就让它推断，推断不出来的时候你要进行注释。
